services:
  arena-mcp-server:
    image: ghcr.io/carbonrobotics/arena-mcp-server:${TAG:-main}
    build: .
    env_file:
      - .env
    environment:
      - MCP_PORT=8080
      - MCP_TRANSPORT=${MCP_TRANSPORT:-http}
      - DISABLE_AUTH=${DISABLE_AUTH:-false}
    ports:
      - "8080:8080"
    labels:
      - "traefik.enable=true"
      - "traefik.docker.network=traefik-public"
      - "traefik.http.routers.arena-mcp.rule=Host(`localhost:8080`)"
      - "traefik.http.routers.arena-mcp.entrypoints=https"
      - "traefik.http.routers.arena-mcp.tls.certresolver=le"
      - "traefik.http.services.arena-mcp.loadbalancer.server.port=8080"
    restart: unless-stopped
